<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>å¦‚ä½•è®“ä½ é‡è¦‹æˆ‘â€”â€”å¦‚æœæˆ‘æ˜¯ä¸€æ£µé«˜å±±ä¸Šçš„æ¨¹</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- ç²—é«”æ¨™é¡Œå­—ï¼šMantou Sansï¼ˆé¡ä¼¼é¥…é ­é»‘é«”çš„æ„Ÿè¦ºï¼‰ -->
  <link href="https://fonts.googleapis.com/css2?family=Mantou+Sans&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", sans-serif;
      /* æ”¹æˆå¯¦è‰²æ·ºå’–å•¡ */
      background-color: #f3decb;
      color: #2c1810;
    }

    .page {
      min-height: 100vh;
      padding: 24px 16px 40px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .container {
      max-width: 820px;
      width: 100%;
      background: #fcf5ec;
      border-radius: 24px;
      padding: 28px 22px 30px;
      box-shadow: 0 18px 40px rgba(92, 61, 40, 0.4);
      position: relative;
      overflow: hidden;
    }

    h1,h2,h3 { margin: 0; }

    /* é¦–é è¦–è¦º */

    .hero {
      text-align: center;
      margin-bottom: 10px;
      position: relative;
      padding-bottom: 190px; /* ç•™ç©ºé–“çµ¦èƒŒæ™¯åœ– */
    }

    .hero-top-label {
      font-size: 0.85rem;
      letter-spacing: 0.25em;
      text-indent: 0.25em;
      color: #b4895e;
      margin-bottom: 8px;
    }

    .hero-title-main {
      font-family: "Mantou Sans", "Noto Sans TC", "PingFang TC", sans-serif;
      font-size: 2.3rem;
      letter-spacing: 0.15em;
      text-indent: 0.15em;
      color: #3b2414;
      margin-bottom: 4px;
    }

    .hero-title-sub {
      font-size: 1rem;
      font-weight: 700;
      color: #7b4b24;
      margin-bottom: 14px;
    }

    .poem {
      font-size: 0.93rem;
      color: #7c5434;
      line-height: 1.9;
      white-space: pre-line;
      margin-bottom: 6px;
    }

    .poem-source {
      font-size: 0.8rem;
      color: #a3744a;
      margin-bottom: 10px;
    }

    .hero-desc {
      font-size: 0.9rem;
      color: #6b4b35;
      margin-bottom: 12px;
    }

    /* èƒŒæ™¯åœ–ï¼šå…­æ£µæ¨¹ */
    .hero-visual {
      position: absolute;
      left: 50%;
      bottom: 12px;
      transform: translateX(-50%);
      width: 92%;
      max-width: 620px;
      height: 170px;
      background-image: url("èƒŒæ™¯åœ–.png");
      background-size: contain;
      background-repeat: no-repeat;
      background-position: bottom center;
      pointer-events: none;
      opacity: 0.98;
    }

    .btn {
      padding: 9px 16px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #6e4229, #4a2917);
      color: #fdf5ec;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      box-shadow: 0 8px 18px rgba(45, 24, 15, 0.5);
      transition: transform 0.1s ease, box-shadow 0.1s ease, filter 0.1s ease;
    }
    .btn.hero-btn {
      margin-top: 10px;
      padding: 11px 24px;
    }
    .btn.secondary {
      background: #f3e3d3;
      color: #4a2917;
      box-shadow: 0 4px 10px rgba(160, 120, 92, 0.6);
    }
    .btn:hover {
      transform: translateY(-1px);
      filter: brightness(1.04);
      box-shadow: 0 10px 22px rgba(45, 24, 15, 0.6);
    }
    .btn:active {
      transform: translateY(1px);
      box-shadow: 0 4px 10px rgba(45, 24, 15, 0.4);
    }

    .hint {
      font-size: 0.8rem;
      color: #7b7b7b;
      text-align: center;
      margin: 8px 0 4px;
    }

    /* é¡Œç›®å€ */
    #quizStep { display:none; }

    .progress {
      font-size: 0.86rem;
      color: #8b5e3c;
      text-align: right;
      margin-bottom: 4px;
    }

    .question-box {
      padding: 16px 12px 18px;
      border-radius: 16px;
      background: #fcf5ec;
      border: 1px solid rgba(177, 139, 104, 0.6);
      min-height: 150px;
    }

    .fade-in {
      animation: fadeIn 0.4s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .question-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 12px;
      color: #2c1810;
    }
    .options {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .option-label {
      display: flex;
      align-items: center;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(160, 120, 92, 0.8);
      background: #fff9f2;
      cursor: pointer;
      font-size: 0.95rem;
      transition: background 0.18s ease, border-color 0.18s ease, transform 0.1s ease;
    }
    .option-label:hover {
      background: #f1e0cf;
      border-color: #8b5e3c;
      transform: translateY(-1px);
    }
    .option-label input {
      margin-right: 8px;
      accent-color: #8b5e3c;
    }
    .option-label.selected {
      background: #6e4229;
      color: #fdf5ec;
      border-color: #402111;
    }
    .option-label.selected input {
      accent-color: #facc15;
    }

    .actions {
      margin-top: 16px;
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    .message {
      margin-top: 8px;
      text-align: center;
      font-size: 0.86rem;
      color: #b91c1c;
      min-height: 1.2em;
    }

    /* çµæœå¡ç‰‡ */
    #resultStep { display:none; margin-top: 22px; }

    .result-card-wrapper {
      display: flex;
      justify-content: center;
    }

    .result-card {
      width: 100%;
      max-width: 360px;
      /* èƒŒæ™¯æ”¹ç‚º #996842 */
      background: #996842;
      border-radius: 18px;
      color: #f9efe3;
      padding: 16px 16px 18px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      box-shadow: 0 14px 28px rgba(17, 10, 6, 0.9);
      position: relative;
    }

    .result-image {
      width: 100%;
      border-radius: 12px;
      overflow: hidden;
      margin-bottom: 6px;
      background: #f4ebe0;
    }
    .result-image img {
      width: 100%;
      display: block;
    }

    .result-header-text {
      font-size: 0.82rem;
      color: #f0d3aa;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      margin-bottom: 2px;
    }

    .result-name {
      font-size: 1.4rem;
      font-weight: 700;
      margin-bottom: 2px;
    }
    .result-latin {
      font-size: 0.85rem;
      font-style: italic;
      color: #f5d9b8;
      margin-bottom: 6px;
    }
    .result-tagline {
      font-size: 0.9rem;
      color: #ffe4b8;
      margin-bottom: 4px;
    }

    .result-hashtags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
    }
    .result-hashtag {
      font-size: 0.8rem;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255, 235, 205, 0.6);
      background: rgba(22, 14, 9, 0.6);
    }

    .section-block {
      margin-top: 8px;
      padding-top: 6px;
      border-top: 1px solid rgba(248, 221, 190, 0.35);
    }
    .section-block-title {
      font-size: 0.82rem;
      letter-spacing: 0.3em;
      text-indent: 0.3em;
      color: #f0d3aa;
      margin-bottom: 4px;
    }
    .section-block-body {
      font-size: 0.88rem;
      line-height: 1.6;
      color: #f9efe3;
      white-space: pre-line;
    }

    .small-note {
      font-size: 0.8rem;
      color: #f2d7b5;
      margin-top: 6px;
      opacity: 0.9;
    }

    .result-actions {
      margin-top: 12px;
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    @media (max-width: 600px) {
      .container { padding: 20px 14px 24px; }
      .hero-title-main { font-size: 2rem; }
      .hero { padding-bottom: 170px; }
      .hero-visual { height: 150px; }
      .question-box { padding: 14px 10px 16px; }
      .result-card { padding: 14px 12px 16px; }
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="container">
      <!-- Intro Step -->
      <div id="introStep">
        <div class="hero">
          <div class="hero-top-label">é«˜ å±± Â· ç›¸ é‡ å° æ¸¬ é©—</div>
          <div class="hero-title-main">å¦‚ä½•è®“ä½ é‡è¦‹æˆ‘</div>
          <div class="hero-title-sub">â€”â€”æˆ‘æ˜¯å“ªç¨®é«˜å±±ä¸Šçš„æ¨¹ï¼Ÿ</div>

          <div class="poem">
æˆ‘æ˜¯ä¸€æ£µé«˜å±±ä¸Šçš„æ¨¹
å‰ä¸–æ·±æ„›çš„ä½ å†æ¬¡èµ°å‘æˆ‘
å¦‚ä½•è®“ä½ é‡è¦‹æˆ‘ï¼Ÿ
åœ¨æˆ‘æœ€ç¾éº—çš„æ™‚åˆ»ã€€ç‚ºé€™
æˆ‘å·²åœ¨ä½›å‰ã€€æ±‚äº†äº”ç™¾å¹´
æ±‚ä»–è®“æˆ‘å€‘çµä¸€æ®µå¡µç·£
          </div>
          <div class="poem-source">
ç™¼æƒ³è‡ªï¼šå¸­æ…•è“‰â€”â€”ã€Šä¸€æ£µé–‹èŠ±çš„æ¨¹ã€‹
          </div>

          <div class="hero-desc">
é€éåå€‹ç›´è¦ºçš„é¸æ“‡ï¼Œçœ‹çœ‹ä½ æœƒæˆç‚ºå“ªä¸€æ£µé«˜å±±ä¸Šçš„æ¨¹ï¼Œ<br>
ä»¥åŠï¼Œä½ æ˜¯æ€éº¼æ„›ä¸€å€‹äººã€å®ˆè‘—ä¸€å€‹äººçš„ã€‚
          </div>

          <button class="btn hero-btn" id="startBtn">é–‹å§‹æ¸¬é©—</button>

          <div class="hero-visual"></div>
        </div>
      </div>

      <!-- Quiz Step -->
      <div id="quizStep">
        <div class="progress" id="progressText"></div>
        <div class="question-box" id="questionBox"></div>

        <div class="actions">
          <button class="btn secondary" id="prevBtn">ä¸Šä¸€é¡Œ</button>
          <button class="btn" id="nextBtn">ä¸‹ä¸€é¡Œ</button>
        </div>
        <div class="hint">è«‹ä¾ç›´è¦ºä½œç­”ï¼Œåé¡Œéƒ½å›ç­”å®Œæ‰èƒ½çœ‹åˆ°çµæœã€‚</div>
        <div class="message" id="message"></div>
      </div>

      <!-- Result Step -->
      <div id="resultStep">
        <div class="result-card-wrapper">
          <div class="result-card" id="resultCard">
            <!-- JS ç”¢ç”Ÿå…§å®¹ -->
          </div>
        </div>
        <div class="result-actions">
          <button class="btn secondary" id="redoBtn">å†åšä¸€æ¬¡</button>
          <button class="btn" id="downloadBtn">ä¸‹è¼‰çµæœåœ–</button>
        </div>
      </div>
    </div>
  </div>

  <!-- html2canvas ä¾›ä¸‹è¼‰çµæœåœ–ç”¨ -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <script>
    // ---- é¡Œç›®è¨­å®š ----
    const questions = [
      {
        text: "Q1ï½œå±±å¾‘å‚³ä¾†è…³æ­¥è²ï¼Œä½ ç¬¬ä¸€åæ‡‰æ˜¯ï¼Ÿ",
        options: [
          {
            text: "A. æƒ³ä¼¸å‡ºææ¢ï¼Œç¢ºèªæ˜¯ä¸æ˜¯ä»–ï¼å¥¹",
            scores: { juniper: 1, taiwania: 1 }
          },
          {
            text: "B. å…ˆå®‰éœåœ°è§€å¯Ÿï¼Œå¿ƒè·³å»æ‚„æ‚„åŠ é€Ÿ",
            scores: { tsuga: 1, spruce: 1, hinoki: 1, cyprus: 1 }
          }
        ]
      },
      {
        text: "Q2ï½œæ­¤æ™‚é¢¨çªç„¶è®Šå¤§ï¼Œä»–ï¼å¥¹çš„è…³æ­¥è¢«å¹å¾—æœ‰é»ä¸ç©©ã€‚ä½ æœƒï¼Ÿ",
        options: [
          {
            text: "A. æ¯«ä¸çŒ¶è±«åœ°æ’èµ·è‡ªå·±çš„æå¹¹æ“‹é¢¨",
            scores: { juniper: 1, taiwania: 1 }
          },
          {
            text: "B. æƒ³ä¼¸æ‰‹ä½†çŒ¶è±«ï¼šã€Œç¾åœ¨é å¤ªè¿‘æœƒåš‡åˆ°ä»–å—ï¼Ÿã€",
            scores: { tsuga: 1, spruce: 1, hinoki: 1, cyprus: 1 }
          }
        ]
      },
      {
        text: "Q3ï½œä»–ï¼å¥¹æŠ¬é ­çœ‹è‘—ä½ ï¼Œçœ¼ç¥è£¡æœ‰ä¸€é»ç†Ÿæ‚‰æ„Ÿã€‚ä½ å¿ƒè£¡ï¼Ÿ",
        options: [
          {
            text: "A. ç«‹åˆ»æ„Ÿåˆ°ä¸€è‚¡æš–æµï¼šã€Œæˆ‘å°±çŸ¥é“ä½ æœƒå›ä¾†ã€‚ã€",
            scores: { spruce: 1, cyprus: 1 }
          },
          {
            text: "B. å‰›å‰›é¢¨å¾ˆå¤§ï¼Œå…ˆæª¢æŸ¥è‡ªå·±æ˜¯å¦ç©©å®šçš„ç«™å¥½ï¼Œä¸€åˆ‡å†·éœå†èªª",
            scores: { tsuga: 1, hinoki: 1, taiwania: 1 }
          }
        ]
      },
      {
        text: "Q4ï½œä»–ï¼å¥¹ä¼¸æ‰‹è§¸ç¢°ä½ çš„æ¨¹çš®ã€‚ä½ æœ€çœŸå¯¦çš„åæ‡‰æ˜¯ï¼Ÿ",
        options: [
          {
            text: "A. ç«‹åˆ»è²¼è¿‘ä»–ï¼å¥¹çš„æ‰‹ï¼Œæ¯«ä¸æ©é£¾",
            scores: { juniper: 1, taiwania: 1 }
          },
          {
            text: "B. å‡è£æ²’æ„Ÿè¦ºï¼Œä½†å…§å¿ƒç˜‹ç‹‚å°–å«",
            scores: { tsuga: 1, spruce: 1, hinoki: 1, cyprus: 1 }
          }
        ]
      },
      {
        text: "Q5ï½œä»–ï¼å¥¹å•ä½ ï¼šã€Œé€™äº›å¹´ï¼Œä½ éå¾—å¥½å—ï¼Ÿã€ä½ æœƒï¼Ÿ",
        options: [
          {
            text: "A. å¦ç™½çš„èªªï¼šã€Œæˆ‘ä¸€ç›´éƒ½å¾ˆæƒ³å¿µä½ ã€‚ã€",
            scores: { juniper: 1, taiwania: 1, cyprus: 1 }
          },
          {
            text: "B. è£æ²’äº‹æ·¡æ·¡çš„å›ï¼šã€Œæˆ‘å¾ˆå¥½ã€‚ã€",
            scores: { tsuga: 1, spruce: 1, hinoki: 1 }
          }
        ]
      },
      {
        text: "Q6ï½œä»–ï¼å¥¹åœ¨ä½ èº«é‚Šåä¸‹ä¾†ï¼Œèªæ°£æœ‰é»ç–²å€¦ã€‚ä½ æœƒï¼Ÿ",
        options: [
          {
            text: "A. æƒ³è¦ä»–ï¼å¥¹é åœ¨ä½ èº«ä¸Šä¼‘æ¯",
            scores: { spruce: 1, cyprus: 1 }
          },
          {
            text: "B. æ‚„æ‚„æ’èµ·æ›´å¤šææ¢ï¼Œä¸è®“ä»–ï¼å¥¹çœ‹åˆ°ä½ å¿ƒç–¼",
            scores: { juniper: 1, tsuga: 1, hinoki: 1, taiwania: 1 }
          }
        ]
      },
      {
        text: "Q7ï½œä»–èªªæƒ³è½ä½ çš„æ•…äº‹ã€‚ä½ æœƒï¼Ÿ",
        options: [
          {
            text: "A. é–‹å§‹è¬›å¾ˆå¤šå±±ä¸Šçš„æ‰€è¦‹æ‰€èã€é‰…ç´°é¡éºçš„æè¿°ä¸€åˆ‡",
            scores: { taiwania: 1, juniper: 1 }
          },
          {
            text: "B. å–®ç´”èªªå¹¾å¥ï¼Œä½†æ¯ä¸€å¥éƒ½è—è‘—æ·±æƒ…",
            scores: { tsuga: 1, spruce: 1, hinoki: 1, cyprus: 1 }
          }
        ]
      },
      {
        text: "Q8ï½œçªç„¶ä¸‹èµ·ç´°é›¨ï¼Œä»–ï¼å¥¹æƒ³é›¢é–‹é¿é›¨ã€‚ä½ æœƒï¼Ÿ",
        options: [
          {
            text: "A. ç«‹åˆ»ä¼¸å‡ºæ›´å¤šæè‘‰å¹«ä»–ï¼å¥¹é®é›¨",
            scores: { tsuga: 1, taiwania: 1, juniper: 1 }
          },
          {
            text: "B. å¿ƒæƒ³ï¼šã€Œæœƒä¸æœƒå¤ªçªç„¶ï¼Ÿã€ä½†æœ€å¾Œé‚„æ˜¯ä¼¸å‡ºæ›´å¤šæè‘‰",
            scores: { spruce: 1, cyprus: 1, hinoki: 1 }
          }
        ]
      },
      {
        text: "Q9ï½œä»–ï¼å¥¹èªªï¼šã€Œå¦‚æœæˆ‘æ˜å¤©å›ä¾†ï¼Œä½ é‚„æœƒåœ¨é€™è£¡å—ï¼Ÿã€",
        options: [
          {
            text: "A. æˆ‘æœƒå›ç­”ï¼šã€Œæˆ‘æœƒåœ¨é€™è£¡ç­‰ä½ ã€‚ã€",
            scores: { spruce: 1, cyprus: 1 }
          },
          {
            text: "B. æˆ‘æœƒå›ç­”ï¼šã€Œæˆ‘ä¸€ç›´éƒ½åœ¨é€™è£¡ï¼Œä½†ä½ æ˜¯è‡ªç”±çš„ã€‚ã€",
            scores: { juniper: 1, tsuga: 1, hinoki: 1, taiwania: 1 }
          }
        ]
      },
      {
        text: "Q10ï½œä»–è½‰èº«é›¢é–‹å‰ï¼Œä½ æœ€å¾Œæƒ³å‘Šè¨´ä»–çš„ä¸€å¥è©±æ˜¯ï¼š",
        options: [
          {
            text: "A. ã€Œæˆ‘æ›¾ç¶“ä¸€ç›´é»˜é»˜ç‚ºä½ æ“‹é¢¨ã€‚ã€",
            scores: { tsuga: 1, spruce: 1, cyprus: 1 }
          },
          {
            text: "B. ã€Œç„¡è«–ä½ åœ¨å“ªè£¡ï¼Œæˆ‘éƒ½æœ‰è¾¦æ³•æ‰¾åˆ°ä½ ã€‚ã€",
            scores: { juniper: 1, taiwania: 1 }
          },
          {
            text: "C. ã€Œåˆ¥æ“”å¿ƒæˆ‘ï¼Œæˆ‘æœƒç©©ç©©çš„ç¹¼çºŒç«™åœ¨é€™è£¡ã€‚ã€",
            scores: { hinoki: 1, tsuga: 1 }
          },
          {
            text: "D. ã€Œæˆ‘ä¸€ç›´éƒ½åœ¨ï¼Œæˆ‘æœƒç­‰ä½ æº–å‚™å¥½ã€‚ã€",
            scores: { cyprus: 1, spruce: 1, hinoki: 1 }
          }
        ]
      }
    ];

    // ---- å…­ç¨®æ¨¹äººæ ¼ ----
    const treeProfiles = {
      tsuga: {
        key: "tsuga",
        name: "å°ç£éµæ‰",
        latin: "Tsuga chinensis var. formosana",
        tagline: "éµæ¼¢æŸ”æƒ…çš„å®ˆå€™è€…",
        desc:
"ä½ åƒéµæ‰â€”â€”å¤–è¡¨æ²‰ç©©å‰›ç¡¬ã€å…§è£¡å»è—è‘—æ·±æ·±çš„æº«åº¦ã€‚\nå‰ä¸–çš„é‚£å€‹ä»–ï¼å¥¹å†æ¬¡èµ°è¿‘æ™‚ï¼Œ\nä½ ä¸èªªè©±ï¼Œä½†ä½ æŠŠæ‰€æœ‰çš„ææ¢éƒ½è®“å¾—æ›´é–‹ä¸€äº›ï¼Œ\nåªç‚ºäº†è®“ä»–èƒ½æ›´é è¿‘ä½ ä¸€é»ã€‚\nä½ å¾ä¸æŠŠæ„›æ›åœ¨å˜´é‚Šï¼Œ\nä½†ä½ å»æœƒç‚ºä»–ï¼å¥¹æ“‹é¢¨ã€æ’é›¨ã€\næœƒç”¨è‡ªå·±çš„èº«è»€ç‚ºä»–ç•™ä¸‹ä¸€å¡Šå®‰ç©©çš„é™°å½±ã€‚\nä½ çŸ¥é“æ„›ä¸æ˜¯èª‡å¼µçš„èªè¨€ï¼Œå³ä½¿åœ¨è£¸å²©è²§ç˜ çš„åœ°æ–¹ï¼Œ\nä¹Ÿèƒ½åŠªåŠ›æŠŠæ ¹æ‰ä¸‹å»ï¼Œ\nåªç‚ºåœ¨ä»–é è¿‘çš„é‚£ä¸€åˆ»ï¼Œä¾ç„¶ç«™å¾—ç©©ç©©çš„ã€‚",
        hashtags: ["#éµæ¼¢æŸ”æƒ…", "#åˆ€å­å£è±†è…å¿ƒ", "#æ²‰é»˜çš„æ·±æƒ…"],
        bestMatch: "å°ç£é›²æ‰â€”â€”\nç©©é‡åˆæ•æ„Ÿï¼Œä½ å€‘æœƒæ…¢æ…¢é•·æˆå½¼æ­¤çš„é¿é¢¨æ¸¯ã€‚",
        worstMatch: "å°ç£æ‰æŸâ€”â€”\nä½ å€‘éƒ½ä¸å¤ªèªªå¿ƒäº‹ï¼Œå®¹æ˜“å¡åœ¨èª°å…ˆé–‹å£çš„åƒµå±€ã€‚",
        message: "ä½ å…¶å¯¦ä¸€ç›´éƒ½åœ¨ï¼Œåªæ˜¯é‚„åœ¨ç­‰ä¸€å€‹é¡˜æ„è®€æ‡‚ä½ æ²‰é»˜çš„äººã€‚"
      },
      juniper: {
        key: "juniper",
        name: "ç‰å±±åœ“æŸ",
        latin: "Juniperus squamata",
        tagline: "è‡ªç”±ä¸ç¾ˆçš„éˆé­‚æ—…äºº",
        desc:
"ä½ é€™ä¸€ç”Ÿæœ€è¨å­è¢«æ¡†ä½ã€‚\nç„¡è«–æ˜¯é›²éœ§ã€ç¨œç·šã€é‚„æ˜¯æ„›â€”â€”ä½ éƒ½ç›¸ä¿¡è‡ªå·±æœ‰èƒ½åŠ›èµ°åˆ°ä»»ä½•åœ°æ–¹ã€‚\nå‰ä¸–æ·±æ„›çš„ä»–ï¼å¥¹èµ°ä¾†æ™‚ï¼Œ\nä½ çš„ç¬¬ä¸€å¥æ˜¯ã€Œä½ æ˜¯æ€éº¼æ‰¾åˆ°æˆ‘çš„ï¼Ÿã€\nä½ è‡ªç”±ã€ç„¡æ‹˜ç„¡æŸï¼Œæ„›å°ä½ ä¾†èªªä¸¦ä¸æ˜¯ä½”æœ‰ï¼Œæ˜¯åŒè¡Œã€‚\nä½ ä¹Ÿè¨±ä¸æœƒæ°¸é ç•™åœ¨åŒä¸€å€‹å½¢æ…‹ï¼š\næœ‰æ™‚ä½ åƒçŒæœ¨èˆ¬è²¼è¿‘å¤§åœ°ï¼Œæœ‰æ™‚åˆæŒºç«‹æˆå–¬æœ¨è¿æ¥é¢¨é›¨ã€‚\nä½†ä»–ï¼å¥¹åªè¦é¡˜æ„æ‰¾ï¼Œä½ æ°¸é åœ¨é‚£è£¡ã€‚",
        hashtags: ["#è‡ªç”±éˆé­‚", "#å±±å·”ä¹‹ä¸Šæˆ‘ç„¡æ‰€ç•æ‡¼", "#æ„›æ˜¯æµå‹•"],
        bestMatch: "ç´…æªœâ€”â€”\nç´…æªœçµ¦ä½ å¯ä»¥å€šé çš„é«˜åº¦ï¼Œä½ å¸¶ä»–çœ‹ä¸ä¸€æ¨£çš„é¢¨æ™¯ã€‚",
        worstMatch: "å°ç£æ‰â€”â€”\nå…©å€‹éƒ½å¾ˆè¦å¼·ï¼Œåˆéƒ½æƒ³è‡ªç”±ï¼Œæœƒä¸å°å¿ƒæŠŠå½¼æ­¤æ¨é ã€‚",
        message: "è«‹è¨˜å¾—ï¼Œåœ¨é¸æ“‡å‘å“ªè£¡æµæµªä¹‹å‰ï¼Œä¹Ÿè¦ç•™ä¸€å¡Šåœ°æ–¹çµ¦æœƒæƒ³å›å»çš„é‚£å€‹äººã€‚"
      },
      spruce: {
        key: "spruce",
        name: "å°ç£é›²æ‰",
        latin: "Picea morrisonicola",
        tagline: "ç¨€æœ‰ç´°è†©çš„çè²´å¿ƒ",
        desc:
"ä½ æ˜¯é‚£ç¨®ä¸å®¹æ˜“è¢«ç†è§£çš„äººã€‚\nä½ éœ€è¦çš„æ˜¯ç´°è†©çš„é™ªä¼´ã€é©åˆ‡çš„æº«åº¦ã€å‰›å¥½çš„è·é›¢ã€‚\nå‰ä¸–çš„ä»–ï¼å¥¹é è¿‘ä½ æ™‚ï¼Œä½ æœƒå¿ä¸ä½é€€åŠæ­¥ï¼Œå› ç‚ºä½ çŸ¥é“è‡ªå·±çè²´ï¼Œ\nä¹ŸçŸ¥é“è‡ªå·±æ•æ„Ÿã€‚\nå¯ç•¶ä»–çœŸçš„èªçœŸçœ‹è‘—ä½ æ™‚ï¼Œä½ ä¾¿åƒç”Ÿåœ¨æ·±åšåœŸå£¤çš„é‚£æ£µé›²æ‰ï¼Œ\né»˜é»˜æŠŠè‡ªå·±æœ€æŸ”è»Ÿçš„éƒ¨åˆ†äº¤çµ¦ä»–ã€‚\nä½ ä¸é©åˆè½Ÿè½Ÿçƒˆçƒˆçš„æ„›ã€‚\nä½ è¦çš„æ˜¯è¢«ç†è§£ã€è¢«å°Šé‡ã€è¢«çœ‹è¦‹ç´°ç¯€ã€‚\nä½ å°±åƒä¸€æŠŠæœ¨è£½æ¨‚å™¨ï¼Œéœ€è¦è¢«ç”¨å¿ƒå‘µè­·æ‰èƒ½æ¼”å¥å‡ºæœ€ç¾çš„è²éŸ³ã€‚",
        hashtags: ["#æº«æŸ”åˆæ•æ„Ÿ", "#é«˜å±±é™å®šæ¬¾", "#æ‡‚æˆ‘æ¯”æ„›æˆ‘é‡è¦"],
        bestMatch: "å°ç£éµæ‰â€”â€”\nä»–çµ¦ä½ ç©©å®šï¼Œä½ çµ¦ä»–æº«åº¦ï¼Œä½ å€‘æœƒå°è²å»é•·ä¹…åœ°ç›¸æ„›ã€‚",
        worstMatch: "ç‰å±±åœ“æŸâ€”â€”\nä»–èµ°å¾—å¤ªå¿«ã€å¤ªè‡ªç”±ï¼Œä½ æœƒè·Ÿä¸ä¸Šï¼Œä¹Ÿæœƒä¸å®‰ã€‚",
        message: "ä½ ä¸¦ä¸æ˜¯é›£æ‡‚ï¼Œåªæ˜¯å€¼å¾—æ…¢æ…¢ç†è§£ä½ çš„äººã€‚"
      },
      cyprus: {
        key: "cyprus",
        name: "ç´…æªœ",
        latin: "Chamaecyparis formosensis",
        tagline: "é¡˜èˆ‡ä½ ä¸€èµ·æˆé•·çš„å¤¥ä¼´å‹æˆ€äºº",
        desc:
"ä½ æ˜¯å…¸å‹çš„ã€Œç›¸äº’æ‰¶æŒã€å‹äººæ ¼ã€‚\nä½ ä¸æ€•æ‰¿æ“”ã€ä¸æ€•ç´®æ ¹æ·±è™•ã€ä¸æ€•è®“æ„›åˆä½µå½¼æ­¤çš„ç”Ÿå‘½ã€‚\nå‰ä¸–æ·±æ„›çš„ä»–ï¼å¥¹é è¿‘ä½ æ™‚ï¼Œä½ ä¸æœƒå•ã€Œä½ ä¾†åšä»€éº¼ã€ï¼Œ\nåè€Œæ˜¯å•ï¼šã€Œé€™ä¸€æ¬¡ï¼Œæˆ‘å€‘èƒ½ä¸€èµ·é•·æˆæ›´å¤§çš„æ¨¹å—ï¼Ÿã€\nä½ ç›¸ä¿¡æ„Ÿæƒ…çš„åŸå› ä¸æ˜¯å°æ–¹çµ¦ä½ ä»€éº¼ï¼Œ\nè€Œæ˜¯ä½ å€‘èƒ½ä¸€èµ·è®Šå¾—æ›´å¼·å¤§ã€æ›´ç©©å›ºã€‚\nä½ ä¹Ÿé¡˜æ„é™ªäººèµ°ä¸€ç”Ÿçš„æ™‚é–“â€”â€”å› ç‚ºä½ çŸ¥é“ï¼Œå¥½æ±è¥¿éœ€è¦æ…¢æ…¢é•·ã€‚",
        hashtags: ["#ä¸€èµ·æˆé•·", "#ç™‚ç™’ç³»åŠ›é‡", "#æˆ‘é¡˜èˆ‡ä½ åˆä½µç”Ÿå‘½"],
        bestMatch: "ç‰å±±åœ“æŸâ€”â€”\nä»–å¸¶ä¾†è®ŠåŒ–èˆ‡éˆæ„Ÿï¼Œä½ å¹«ä»–æŠŠå®¶å®‰åœ¨å±±è£¡ã€‚",
        worstMatch: "å°ç£é›²æ‰â€”â€”\nä½ å€‘éƒ½å¤ªæ•æ„Ÿåˆæƒ³é¡§å°æ–¹ï¼Œå®¹æ˜“ä¸€èµ·ç´¯ã€‚",
        message: "åˆ¥å¿˜äº†åœ¨ç…§é¡§åˆ¥äººçš„åŒæ™‚ï¼Œä¹Ÿè¦ç•™ä¸€é»é™½å…‰çµ¦æ­£åœ¨é•·é«˜çš„è‡ªå·±ã€‚"
      },
      hinoki: {
        key: "hinoki",
        name: "å°ç£æ‰æŸ",
        latin: "Chamaecyparis obtusa var. formosana",
        tagline: "ä½èª¿å»å€¼å¾—ä¿¡ä»»çš„æš–ç³»äººæ ¼",
        desc:
"ä½ å®‰éœã€ä½†ç©©ã€‚\nä½ ä½èª¿ã€ä½†å¯é ã€‚\nä½ æ˜¯é‚£ç¨®ä¸æœƒåœ¨ç¬¬ä¸€çœ¼é©šè±”åˆ¥äººçš„äººï¼Œ\nä½†ä¹…è€Œä¹…ä¹‹ï¼Œä»–æœƒç™¼ç¾ä½ æ˜¯æœ€è®“äººå®‰å¿ƒçš„å­˜åœ¨ã€‚\nå‰ä¸–çš„é‚£å€‹äººèµ°ä¾†æ™‚ï¼Œä½ ä¸æœƒç‰¹åˆ¥æ¿€å‹•ã€‚\nä½†ç•¶ä»–é è¿‘ï¼Œä½ æœƒæ‚„æ‚„ä¼¸å‡ºä¸€æ ¹ææ¢ï¼šã€Œè¦ä¸è¦é è‘—æˆ‘ä¼‘æ¯ä¸€ä¸‹ï¼Ÿã€\nä½ ä¸è¿½æ±‚è½Ÿå‹•ï¼Œä½ è¿½æ±‚é•·é ã€‚\nä½ çš„æ„›åƒä½ çš„æœ¨æä¸€æ¨£â€”â€”æ‰å¯¦ã€è€ä¹…ã€ä¸çŸ¯è£‚ã€‚",
        hashtags: ["#è¶Šç›¸è™•è¶Šæº«æš–", "#ä½èª¿çš„é«˜å“è³ª", "#ç´°æ°´é•·æµçš„æ„›"],
        bestMatch: "å°ç£æ‰â€”â€”\nä»–å¤–æ”¾ã€ä½ å…§æ–‚ï¼Œä¸€èµ·æœƒè®Šæˆå¾ˆèˆ’æœçš„é¢¨æ™¯ã€‚",
        worstMatch: "å°ç£éµæ‰â€”â€”\nä½ å€‘éƒ½æ‚¶ä¸å¤ªæéœ€æ±‚ï¼Œæœ‰äº‹éƒ½å¾€å¿ƒè£¡åã€‚",
        message: "åˆ¥æ€•èªªå‡ºã€Œæˆ‘ä¹Ÿéœ€è¦è¢«åœ¨ä¹ã€ï¼Œ\né‚£ä¸æ˜¯éº»ç…©ï¼Œæ˜¯ä¸€ç¨®ä¿¡ä»»ã€‚"
      },
      taiwania: {
        key: "taiwania",
        name: "å°ç£æ‰",
        latin: "Taiwania cryptomerioides",
        tagline: "å¤©ç”Ÿé©•å‚²çš„å¤§æ¨¹ä¸»è§’",
        desc:
"ä½ æ˜¯ä¸€æ£µæœƒè®“äººæŠ¬é ­çœ‹çš„æ¨¹ã€‚\nä¸æ˜¯å› ç‚ºä½ é«˜ï¼Œè€Œæ˜¯å› ç‚ºä½ æœ‰ä¸€ç¨®ã€Œå¤©ç”Ÿå¦‚æ­¤ã€çš„æ°£å ´ã€‚\nä»–ï¼å¥¹å†æ¬¡èµ°å‘ä½ æ™‚ï¼Œä½ å¿ƒè£¡å…¶å¯¦ç¿»å¤©è¦†åœ°ï¼Œä½†å¤–è¡¨ä¾ç„¶çœ‹èµ·ä¾†é›²æ·¡é¢¨è¼•ã€‚\nä½ æ„›å¾—å¤§æ–¹ã€æ„›å¾—é©•å‚²ï¼Œä½ ä¸è—ã€‚\nä½ æƒ³çš„å¾ä¾†ä¸æ˜¯ã€Œä½ æœƒä¸æœƒæ„›æˆ‘ã€ï¼Œ\næ˜¯ã€Œæˆ‘å€‘èƒ½ä¸èƒ½ä¸€èµ·æˆç‚ºæ›´å²å®³çš„å­˜åœ¨ã€ã€‚\nä½ é©åˆä¸€æ®µæ——é¼“ç›¸ç•¶ã€å½¼æ­¤æ¬£è³çš„æ„›ã€‚",
        hashtags: ["#ä¸»è§’èƒ½é‡", "#æˆ‘å€¼å¾—æœ€å¥½", "#é©•å‚²çš„æ·±æƒ…"],
        bestMatch: "å°ç£æ‰æŸâ€”â€”\nä»–æ›¿ä½ æ”¶é‚Šã€ä½ æ›¿ä»–ç™¼å…‰ï¼Œæ˜¯å¾ˆæœ‰æ°£å‹¢åˆæº«æŸ”çš„çµ„åˆã€‚",
        worstMatch: "ç‰å±±åœ“æŸâ€”â€”\nä½ æƒ³ç«™ç©©ã€ä»–æƒ³äº‚èµ°ï¼Œç¯€å¥å¾ˆé›£å°åœ¨ä¸€èµ·ã€‚",
        message: "ä½ å¤©ç”Ÿç™¼å…‰ï¼Œä½†çœŸæ­£æœƒç•™ä¸‹ä¾†çš„äººï¼Œ\næ˜¯é‚£å€‹é¡˜æ„çœ‹ä½ å¸ä¸‹å…‰èŠ’çš„æ¨£å­ã€‚"
      }
    };

    // æ¨¹ç¨®å°æ‡‰åœ–ç‰‡æª”å
    const treeImages = {
      juniper: "ç‰å±±åœ“æŸ.jpg",
      cyprus: "ç´…æªœ.jpg",
      hinoki: "è‡ºç£æ‰æŸ.jpg",
      taiwania: "è‡ºç£è¡«.jpg",
      spruce: "è‡ºç£é›²æ‰.jpg",
      tsuga: "è‡ºç£éµæ‰.jpg"
    };

    // ---- ç‹€æ…‹ ----
    let currentQuestionIndex = 0;
    const answers = new Array(questions.length).fill(null);

    const introStep = document.getElementById("introStep");
    const quizStep = document.getElementById("quizStep");
    const resultStep = document.getElementById("resultStep");
    const questionBox = document.getElementById("questionBox");
    const progressText = document.getElementById("progressText");
    const messageEl = document.getElementById("message");
    const resultCard = document.getElementById("resultCard");

    const startBtn = document.getElementById("startBtn");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const redoBtn = document.getElementById("redoBtn");
    const downloadBtn = document.getElementById("downloadBtn");

    startBtn.addEventListener("click", () => {
      introStep.style.display = "none";
      quizStep.style.display = "block";
      currentQuestionIndex = 0;
      renderQuestion();
    });

    prevBtn.addEventListener("click", () => {
      if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
        renderQuestion();
      }
    });

    nextBtn.addEventListener("click", () => {
      // è‹¥å·²åˆ°æœ€å¾Œä¸€é¡Œå‰‡æ”¹ç‚ºè¨ˆç®—çµæœ
      if (currentQuestionIndex === questions.length - 1) {
        calculateResult();
      } else {
        currentQuestionIndex++;
        renderQuestion();
      }
    });

    redoBtn.addEventListener("click", () => {
      resultStep.style.display = "none";
      quizStep.style.display = "block";
      currentQuestionIndex = 0;
      renderQuestion();
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    downloadBtn.addEventListener("click", () => {
      const card = document.getElementById("resultCard");
      if (!card || typeof html2canvas === "undefined") return;

      html2canvas(card, {
        scale: 2,
        backgroundColor: null
      }).then(canvas => {
        const link = document.createElement("a");
        link.download = "é«˜å±±æ¨¹äººæ ¼çµæœ.png";
        link.href = canvas.toDataURL("image/png");
        link.click();
      });
    });

    function renderQuestion() {
      const q = questions[currentQuestionIndex];
      progressText.textContent = `ç¬¬ ${currentQuestionIndex + 1} / ${questions.length} é¡Œ`;

      prevBtn.disabled = currentQuestionIndex === 0;
      prevBtn.style.opacity = prevBtn.disabled ? 0.4 : 1;
      nextBtn.textContent = currentQuestionIndex === questions.length - 1 ? "çœ‹çµæœ" : "ä¸‹ä¸€é¡Œ";

      const wrapper = document.createElement("div");
      wrapper.className = "fade-in";

      const title = document.createElement("div");
      title.className = "question-title";
      title.textContent = q.text;
      wrapper.appendChild(title);

      const optionsDiv = document.createElement("div");
      optionsDiv.className = "options";

      q.options.forEach((opt, optIndex) => {
        const label = document.createElement("label");
        label.className = "option-label";

        const input = document.createElement("input");
        input.type = "radio";
        input.name = "q" + currentQuestionIndex;
        input.value = optIndex.toString();

        if (answers[currentQuestionIndex] === optIndex) {
          input.checked = true;
          label.classList.add("selected");
        }

        input.addEventListener("change", () => {
          answers[currentQuestionIndex] = optIndex;
          const siblings = optionsDiv.querySelectorAll(".option-label");
          siblings.forEach(sib => sib.classList.remove("selected"));
          label.classList.add("selected");
        });

        const span = document.createElement("span");
        span.textContent = opt.text;

        label.appendChild(input);
        label.appendChild(span);
        optionsDiv.appendChild(label);
      });

      wrapper.appendChild(optionsDiv);

      questionBox.innerHTML = "";
      questionBox.appendChild(wrapper);
      messageEl.textContent = "";
    }

    function calculateResult() {
      for (let i = 0; i < questions.length; i++) {
        if (answers[i] === null || typeof answers[i] === "undefined") {
          messageEl.textContent = `ç¬¬ ${i + 1} é¡Œé‚„æ²’é¸å–” ğŸŒ§`;
          return;
        }
      }

      messageEl.textContent = "";

      const scores = {
        tsuga: 0,
        juniper: 0,
        spruce: 0,
        cyprus: 0,
        hinoki: 0,
        taiwania: 0
      };

      questions.forEach((q, qIndex) => {
        const optIndex = answers[qIndex];
        const opt = q.options[optIndex];
        Object.entries(opt.scores).forEach(([treeKey, value]) => {
          scores[treeKey] += value;
        });
      });

      let bestTreeKey = null;
      let bestScore = -Infinity;
      Object.entries(scores).forEach(([k, v]) => {
        if (v > bestScore) {
          bestScore = v;
          bestTreeKey = k;
        }
      });

      const profile = treeProfiles[bestTreeKey];
      if (!profile) {
        messageEl.textContent = "å¥½åƒå“ªè£¡æ€ªæ€ªçš„ï¼Œå†è©¦ä¸€æ¬¡çœ‹çœ‹ã€‚";
        return;
      }

      renderResult(profile);
      quizStep.style.display = "none";
      resultStep.style.display = "block";
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    function renderResult(profile) {
      const imgSrc = treeImages[profile.key] || "";
      resultCard.innerHTML = `
        <div class="result-image">
          ${imgSrc ? `<img src="${imgSrc}" alt="${profile.name} æ’åœ–">` : ""}
        </div>
        <div class="result-header-text">ä½ æ˜¯â€¦â€¦</div>
        <div class="result-name">${profile.name}</div>
        <div class="result-latin">${profile.latin}</div>
        <div class="result-tagline">${profile.tagline}</div>
        <div class="result-hashtags">
          ${profile.hashtags.map(tag => `<span class="result-hashtag">${tag}</span>`).join("")}
        </div>

        <div class="section-block">
          <div class="section-block-title">æ€§æ ¼ç‰¹è³ª</div>
          <div class="section-block-body">${profile.desc}</div>
        </div>

        <div class="section-block">
          <div class="section-block-title">å‹å¥½æ¨¹ä¼´</div>
          <div class="section-block-body">${profile.bestMatch}</div>
        </div>

        <div class="section-block">
          <div class="section-block-title">å°ˆå±¬ç•™è¨€</div>
          <div class="section-block-body">${profile.message}</div>
          <div class="small-note">å°å¿ƒç›¸è™•çš„æ¨¹ï¼š${profile.worstMatch}</div>
        </div>
      `;
    }
  </script>
</body>
</html>
